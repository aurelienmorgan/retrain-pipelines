<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
    table {
        border-collapse: collapse;
        width: 100%;
        table-layout: fixed;
    }

    th, td {
        padding: 8px;           <!-- important -->
        text-align: left;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        border: 1px solid #ddd;
        position: relative;
    }

    #name-col { width: 40%; }
    #label-col { width: 25%; }
    #desc-col { width: 35%; }
    <!-- #value-col { width: 20%; } -->

    .group-header {
        cursor: pointer;
        font-weight: bold;
    }

    .hidden {
        display: none;
    }

    tr td:first-child {
        padding-left: calc(10px + var(--indent-level) * 5px);
        position: relative;
    }

    .left-nesting-bar {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 3px;           <!-- important -->
        z-index: 0;
    }

    .right-nesting-bar {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 3px;           <!-- important -->
        z-index: 0;
        right: 0;
    }

    .top-nesting-bar {
        position: absolute;
        height: 3px;           <!-- important -->
        z-index: 0;
        top: 0;
    }

    .bottom-nesting-bar {
        position: absolute;
        height: 3px;           <!-- important -->
        z-index: 0;
        bottom: 0;
    }
</style>
<!-- <script src="collapsible_grouped_table.js"></script> -->
<script src="http://localhost:5001/collapsible_grouped_table.js"></script>
</head>
<body>

<button onclick="collapseAll('demo')">Collapse All</button>

<button onclick="expandAll('demo')">Expand All</button>

<br /><br />

<input type="text" id="levelInput" placeholder="data-level (e.g. G1.2.2.3.3.3.3)" value="G2.9">
<input type="number" id="positionInput" style="width:2.5em;" placeholder="Position (e.g. 3)" value="2">
<button onclick="insertRowButtonHandler()">Insert Styled Row</button>
<script>
function insertRowButtonHandler() {
    const level = document.getElementById('levelInput').value;
    const position = parseInt(document.getElementById('positionInput').value, 10);
/*
    const insertData = [
        { id: "new-row-id", name: "new-row-id", label: "new-row-name",
          description: "new-row-description", value: "new-row-value",
          style: { color: "#fff", background: "#000", border: "#dee2e6" }
        },
        { id: "new-row-2-id", name: "new-row-2-id", label: "new-row-2-name",
          description: "new-row-2-description", value: "new-row-2-value",
          style: { color: "#fff", background: "#000", border: "#dee2e6" }
        }
    ];
*/
    const insertData = [
        {
            id: "new-row-id",
            cells: {
                name: {
                    value: "new-row-name",
                    attributes: { "type": "primary", "format": "text" }
                },
                label: {
                    value: "new-row-label",
                    attributes: { "start-timestamp": "1718123456", "custom": "value1" }
                },
                description: {
                    value: "new-row-description",
                    attributes: {}
                },
                value: {
                    value: "new-row-value",
                    attributes: { "end-timestamp": "1718123478", "format": "currency" }
                }
            },
            style: { color: "#fff", background: "#000", border: "#dee2e6" }
        },
        {
            id: "new-group-1",
            cells: {
                name: {
                    value: "new-group-name-1",
                    attributes: { "group-type": "primary", "expandable": "true" }
                },
                label: {
                    value: "new-group-label-1",
                    attributes: { "category": "main" }
                },
                description: {
                    value: "new-group-1-description",
                    attributes: {}
                },
                value: {
                    value: "",
                    attributes: { "empty": "true" }
                }
            },
            style: { color: "#C8C899", background: "#A72FA9", border: "#0097D8" },
            children: [
                {
                    id: "new-group-1-row-0",
                    cells: {
                        name: {
                            value: "new-group-1-row-name-0",
                            attributes: { "child": "true" }
                        },
                        label: {
                            value: "new-group-1-row-label-0",
                            attributes: { "index": "0" }
                        },
                        description: {
                            value: "new-group-1-row-0-description",
                            attributes: {}
                        },
                        value: {
                            value: "new-group-1-row-0-value",
                            attributes: { "important": "true", "format": "number" }
                        }
                    }
                },
                {
                    id: "new-group-1.1",
                    cells: {
                        name: {
                            value: "new-group-name-1.1",
                            attributes: { "group-type": "secondary", "expandable": "true" }
                        },
                        label: {
                            value: "new-group-label-1.1",
                            attributes: { "category": "sub" }
                        },
                        description: {
                            value: "new-group-1.1-description",
                            attributes: {}
                        },
                        value: {
                            value: "",
                            attributes: { "empty": "true" }
                        }
                    },
                    style: { color: "#C8C899", background: "#A72FA9", border: "#0097D8" },
                    children: [
                        {
                            id: "new-group-1.1-row-0",
                            cells: {
                                name: {
                                    value: "new-group-1.1-row-name-0",
                                    attributes: { "deep": "true" }
                                },
                                label: {
                                    value: "new-group-1.1-row-label-0",
                                    attributes: { "index": "0" }
                                },
                                description: {
                                    value: "new-group-1.1-row-0-description",
                                    attributes: {}
                                },
                                value: {
                                    value: "new-group-1.1-row-0-value",
                                    attributes: { "format": "percentage" }
                                }
                            }
                        },
                        {
                            id: "new-group-1.1-row-1",
                            cells: {
                                name: {
                                    value: "new-group-1.1-row-name-1",
                                    attributes: { "deep": "true" }
                                },
                                label: {
                                    value: "new-group-1.1-row-label-1",
                                    attributes: { "index": "1" }
                                },
                                description: {
                                    value: "new-group-1.1-row-1-description",
                                    attributes: {}
                                },
                                value: {
                                    value: "new-group-1.1-row-1-value",
                                    attributes: { "format": "percentage", "max": "100" }
                                }
                            }
                        }
                    ]
                },
                {
                    id: "new-group-1-row-1",
                    cells: {
                        name: {
                            value: "new-group-1-row-name-1",
                            attributes: { "child": "true" }
                        },
                        label: {
                            value: "new-group-1-row-label-1",
                            attributes: { "index": "1" }
                        },
                        description: {
                            value: "new-group-1-row-1-description",
                            attributes: {}
                        },
                        value: {
                            value: "new-group-1-row-1-value",
                            attributes: { "final": "true" }
                        }
                    }
                }
            ]
        },
        {
            id: "new-row-2-id",
            cells: {
                name: {
                    value: "new-row-2-name",
                    attributes: { "type": "secondary" }
                },
                label: {
                    value: "new-row-2-label",
                    attributes: { "timestamp": "1718123490" }
                },
                description: {
                    value: "new-row-2-description",
                    attributes: {}
                },
                value: {
                    value: "new-row-2-value",
                    attributes: { "format": "scientific" }
                }
            },
            style: { color: "#fff", background: "#000", border: "#dee2e6" }
        },
        {
            id: "new-group-2",
            cells: {
                name: {
                    value: "new-group-name-2",
                    attributes: { "group-type": "primary", "expandable": "true" }
                },
                label: {
                    value: "new-group-label-2",
                    attributes: { "category": "main" }
                },
                description: {
                    value: "new-group-2-description",
                    attributes: {}
                },
                value: {
                    value: "",
                    attributes: { "empty": "true" }
                }
            },
            style: { color: "#C8C899", background: "#A72FA9", border: "#0097D8" },
            children: [
                {
                    id: "new-group-2-row-0",
                    cells: {
                        name: {
                            value: "new-group-2-row-name-0",
                            attributes: { "child": "true" }
                        },
                        label: {
                            value: "new-group-2-row-label-0",
                            attributes: { "index": "0" }
                        },
                        description: {
                            value: "new-group-2-row-0-description",
                            attributes: {}
                        },
                        value: {
                            value: "new-group-2-row-0-value",
                            attributes: { "initial": "true" }
                        }
                    }
                },
                {
                    id: "new-group-2-row-1",
                    cells: {
                        name: {
                            value: "new-group-2-row-name-1",
                            attributes: { "child": "true" }
                        },
                        label: {
                            value: "new-group-2-row-label-1",
                            attributes: { "index": "1" }
                        },
                        description: {
                            value: "new-group-2-row-1-description",
                            attributes: {}
                        },
                        value: {
                            value: "new-group-2-row-1-value",
                            attributes: { "middle": "true" }
                        }
                    }
                },
                {
                    id: "new-group-2.2",
                    cells: {
                        name: {
                            value: "new-group-name-2.2",
                            attributes: { "group-type": "secondary", "expandable": "true" }
                        },
                        label: {
                            value: "new-group-label-2.2",
                            attributes: { "category": "sub" }
                        },
                        description: {
                            value: "new-group-2.2-description",
                            attributes: {}
                        },
                        value: {
                            value: "",
                            attributes: { "empty": "true" }
                        }
                    },
                    style: { color: "#C8C899", background: "#A72FA9", border: "#0097D8" },
                    children: [
                        {
                            id: "new-group-2.2-row-0",
                            cells: {
                                name: {
                                    value: "new-group-2.2-row-name-0",
                                    attributes: { "deep": "true" }
                                },
                                label: {
                                    value: "new-group-2.2-row-label-0",
                                    attributes: { "index": "0" }
                                },
                                description: {
                                    value: "new-group-2.2-row-0-description",
                                    attributes: {}
                                },
                                value: {
                                    value: "new-group-2.2-row-0-value",
                                    attributes: { "format": "decimal" }
                                }
                            }
                        },
                        {
                            id: "new-group-2.2-row-1",
                            cells: {
                                name: {
                                    value: "new-group-2.2-row-name-1",
                                    attributes: { "deep": "true" }
                                },
                                label: {
                                    value: "new-group-2.2-row-label-1",
                                    attributes: { "index": "1" }
                                },
                                description: {
                                    value: "new-group-2.2-row-1-description",
                                    attributes: {}
                                },
                                value: {
                                    value: "new-group-2.2-row-1-value",
                                    attributes: { "format": "decimal", "precision": "2" }
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ];

    insertAt(
        'demo', level, position, insertData,
        interBarsSpacing
    );
}
</script>


<br /><br />

<table id="demo">
    <colgroup>
        <col id="name-col">
        <col id="label-col">
        <col id="desc-col">
        <col id="value-col">
    </colgroup>
    <thead>
        <tr>
            <th>Name</th>
            <th>Label</th>
            <th>Description</th>
            <th>Value</th>
        </tr>
    </thead>
    <tbody id="data-tbody"></tbody>
</table>

<script>
    const tableData = [
        {
            id: "S0",
            cells: {
                name: { value: "S0", attributes: {} },
                label: { value: "Global Standalone A", attributes: {} },
                description: { value: "Always visible", attributes: {} },
                value: { value: "999", attributes: {} }
            },
            style: { color: "#1a5f7a", background: "#FFFA64", border: "#a0d4eb" }
        },
        {
            id: "S1",
            cells: {
                name: { value: "S1", attributes: {} },
                label: { value: "Global Standalone A", attributes: {} },
                description: { value: "Always visible", attributes: {} },
                value: { value: "999", attributes: {} }
            },
            style: { color: "#1a5f7a", background: "#FFFA64", border: "#a0d4eb" }
        },
        {
            id: "G1",
            cells: {
                name: { value: "G1", attributes: {} },
                label: { value: "Group 1", attributes: {} },
                description: { value: "Dark theme group", attributes: {} },
                value: { value: "", attributes: {} }
            },
            style: { color: "#ffffff", background: "#6C849C", border: "#1a252f" },
            children: [
                { 
                    id: "G1.1", 
                    cells: {
                        name: { value: "G1.1", attributes: {} },
                        label: { value: "Item 1.1", attributes: {} },
                        description: { value: "Inherits G1 style", attributes: {} },
                        value: { value: "10", attributes: {} }
                    }
                },
                {
                    id: "G1.2",
                    cells: {
                        name: { value: "G1.2", attributes: {} },
                        label: { value: "Subgroup 1.2", attributes: {} },
                        description: { value: "Red subgroup", attributes: {} },
                        value: { value: "", attributes: {} }
                    },
                    style: { color: "#e74c3c", background: "#FEB3B3", border: "#E46054" },
                    children: [
                        { 
                            id: "G1.2.1", 
                            cells: {
                                name: { value: "G1.2.1", attributes: {} },
                                label: { value: "Item 1.2.1", attributes: {} },
                                description: { value: "Red style", attributes: {} },
                                value: { value: "20", attributes: {} }
                            }
                        },
                        {
                            id: "G1.2.2",
                            cells: {
                                name: { value: "G1.2.2", attributes: {} },
                                label: { value: "Deep Subgroup", attributes: {} },
                                description: { value: "Purple", attributes: {} },
                                value: { value: "", attributes: {} }
                            },
                            style: { color: "#8e44ad", background: "#f5eefc", border: "#FF3FF9" },
                            children: [
                                { 
                                    id: "G1.2.2.1", 
                                    cells: {
                                        name: { value: "G1.2.2.1", attributes: {} },
                                        label: { value: "Item 1.2.2.1", attributes: {} },
                                        description: { value: "Purple", attributes: {} },
                                        value: { value: "30", attributes: {} }
                                    }
                                },
                                { 
                                    id: "G1.2.2.2", 
                                    cells: {
                                        name: { value: "G1.2.2.2", attributes: {} },
                                        label: { value: "Item 1.2.2.2", attributes: {} },
                                        description: { value: "Purple", attributes: {} },
                                        value: { value: "40", attributes: {} }
                                    }
                                },
                                {
                                    id: "G1.2.2.3",
                                    cells: {
                                        name: { value: "G1.2.2.3", attributes: {} },
                                        label: { value: "Deep Subgroup", attributes: {} },
                                        description: { value: "Purple", attributes: {} },
                                        value: { value: "", attributes: {} }
                                    },
                                    style: { color: "#f5eefc", background: "#CD9BFF", border: "#9D3AFF" },
                                    children: [
                                        { 
                                            id: "G1.2.2.3.1", 
                                            cells: {
                                                name: { value: "G1.2.2.3.1", attributes: {} },
                                                label: { value: "Item 1.2.3.1", attributes: {} },
                                                description: { value: "Purple", attributes: {} },
                                                value: { value: "30", attributes: {} }
                                            }
                                        },
                                        { 
                                            id: "G1.2.2.3.2", 
                                            cells: {
                                                name: { value: "G1.2.2.3.2", attributes: {} },
                                                label: { value: "Item 1.2.3.2", attributes: {} },
                                                description: { value: "Purple", attributes: {} },
                                                value: { value: "40", attributes: {} }
                                            }
                                        },
                                        {
                                            id: "G1.2.2.3.3",
                                            cells: {
                                                name: { value: "G1.2.2.3.3", attributes: {} },
                                                label: { value: "Deep Subgroup", attributes: {} },
                                                description: { value: "Purple", attributes: {} },
                                                value: { value: "", attributes: {} }
                                            },
                                            style: { color: "#f5eefc", background: "#BC7AFE", border: "#7AFFFA" },
                                            children: [
                                                { 
                                                    id: "G1.2.2.3.3.1", 
                                                    cells: {
                                                        name: { value: "G1.2.2.3.3.1", attributes: {} },
                                                        label: { value: "Item 1.2.3.3.1", attributes: {} },
                                                        description: { value: "Purple", attributes: {} },
                                                        value: { value: "30", attributes: {} }
                                                    }
                                                },
                                                { 
                                                    id: "G1.2.2.3.3.2", 
                                                    cells: {
                                                        name: { value: "G1.2.2.3.3.2", attributes: {} },
                                                        label: { value: "Item 1.2.3.3.2", attributes: {} },
                                                        description: { value: "Purple", attributes: {} },
                                                        value: { value: "40", attributes: {} }
                                                    }
                                                },
                                                {
                                                    id: "G1.2.2.3.3.3",
                                                    cells: {
                                                        name: { value: "G1.2.2.3.3.3", attributes: {} },
                                                        label: { value: "Deep Subgroup", attributes: {} },
                                                        description: { value: "Purple", attributes: {} },
                                                        value: { value: "", attributes: {} }
                                                    },
                                                    style: { color: "#f5eefc", background: "#714D96", border: "#FBFF00" },
                                                    children: [
                                                        { 
                                                            id: "G1.2.2.3.3.3.1", 
                                                            cells: {
                                                                name: { value: "G1.2.2.3.3.3.1", attributes: {} },
                                                                label: { value: "Item 1.2.3.3.1", attributes: {} },
                                                                description: { value: "Purple", attributes: {} },
                                                                value: { value: "30", attributes: {} }
                                                            }
                                                        },
                                                        { 
                                                            id: "G1.2.2.3.3.3.2", 
                                                            cells: {
                                                                name: { value: "G1.2.2.3.3.3.2", attributes: {} },
                                                                label: { value: "Item 1.2.3.3.2", attributes: {} },
                                                                description: { value: "Purple", attributes: {} },
                                                                value: { value: "40", attributes: {} }
                                                            }
                                                        },
                                                        {
                                                            id: "G1.2.2.3.3.3.3",
                                                            cells: {
                                                                name: { value: "G1.2.2.3.3.3.3", attributes: {} },
                                                                label: { value: "Deep Subgroup", attributes: {} },
                                                                description: { value: "Purple", attributes: {} },
                                                                value: { value: "", attributes: {} }
                                                            },
                                                            style: { color: "#f5eefc", background: "#714D96", border: "#FBFF00" },
                                                            children: [
                                                                { 
                                                                    id: "G1.2.2.3.3.3.3.1", 
                                                                    cells: {
                                                                        name: { value: "G1.2.2.3.3.3.3.1", attributes: {} },
                                                                        label: { value: "Item 1.2.3.3.3.1", attributes: {} },
                                                                        description: { value: "Purple", attributes: {} },
                                                                        value: { value: "30", attributes: {} }
                                                                    }
                                                                },
                                                                { 
                                                                    id: "G1.2.2.3.3.3.3.2", 
                                                                    cells: {
                                                                        name: { value: "G1.2.2.3.3.3.3.2", attributes: {} },
                                                                        label: { value: "Item 1.2.3.3.3.2", attributes: {} },
                                                                        description: { value: "Purple", attributes: {} },
                                                                        value: { value: "40", attributes: {} }
                                                                    }
                                                                },
                                                                {
                                                                    id: "G1.2.2.3.3.3.3.3",
                                                                    cells: {
                                                                        name: { value: "G1.2.2.3.3.3.3.3", attributes: {} },
                                                                        label: { value: "Deep Subgroup", attributes: {} },
                                                                        description: { value: "Purple", attributes: {} },
                                                                        value: { value: "", attributes: {} }
                                                                    },
                                                                    style: { color: "#f5eefc", background: "#714D96", border: "#FBFF00" },
                                                                    children: [
                                                                        { 
                                                                            id: "G1.2.2.3.3.3.3.3.1", 
                                                                            cells: {
                                                                                name: { value: "G1.2.2.3.3.3.3.3.1", attributes: {} },
                                                                                label: { value: "Item 1.2.3.3.3.3.1", attributes: {} },
                                                                                description: { value: "Purple", attributes: {} },
                                                                                value: { value: "30", attributes: {} }
                                                                            }
                                                                        },
                                                                        { 
                                                                            id: "G1.2.2.3.3.3.3.3.2", 
                                                                            cells: {
                                                                                name: { value: "G1.2.2.3.3.3.3.3.2", attributes: {} },
                                                                                label: { value: "Item 1.2.3.3.3.3.2", attributes: {} },
                                                                                description: { value: "Purple", attributes: {} },
                                                                                value: { value: "40", attributes: {} }
                                                                            }
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                { 
                                    id: "G1.2.2.4", 
                                    cells: {
                                        name: { value: "G1.2.2.4", attributes: {} },
                                        label: { value: "Item 1.2.2.4", attributes: {} },
                                        description: { value: "Purple", attributes: {} },
                                        value: { value: "30", attributes: {} }
                                    }
                                },
                                { 
                                    id: "G1.2.2.5", 
                                    cells: {
                                        name: { value: "G1.2.2.5", attributes: {} },
                                        label: { value: "Item 1.2.2.5", attributes: {} },
                                        description: { value: "Purple", attributes: {} },
                                        value: { value: "40", attributes: {} }
                                    }
                                }
                            ]
                        }
                    ]
                },
                { 
                    id: "G1.3", 
                    cells: {
                        name: { value: "G1.3", attributes: {} },
                        label: { value: "Item 1.3", attributes: {} },
                        description: { value: "Back to G1 style", attributes: {} },
                        value: { value: "50", attributes: {} }
                    }
                }
            ]
        },
        {
            id: "S2",
            cells: {
                name: { value: "S2", attributes: {} },
                label: { value: "Global Standalone B", attributes: {} },
                description: { value: "Blue top-level", attributes: {} },
                value: { value: "888", attributes: {} }
            },
            style: { color: "#075E80", background: "#87CEEB", border: "#00B7FF" }
        },
        {
            id: "G2",
            cells: {
                name: { value: "G2", attributes: {} },
                label: { value: "Group 2", attributes: {} },
                description: { value: "Green group", attributes: {} },
                value: { value: "", attributes: {} }
            },
            style: { color: "#27ae60", background: "#e8f5e9", border: "#a3e4a3" },
            children: [
                { 
                    id: "G2.1", 
                    cells: {
                        name: { value: "G2.1", attributes: {} },
                        label: { value: "Item 2.1", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                {
                    id: "G2.2",
                    cells: {
                        name: { value: "G2.2", attributes: {} },
                        label: { value: "Nested Subgroup", attributes: {} },
                        description: { value: "Brown override", attributes: {} },
                        value: { value: "", attributes: {} }
                    },
                    style: { color: "#5d4037", background: "#efebe9", border: "#bcaaa4" },
                    children: [
                        { 
                            id: "G2.2.1", 
                            cells: {
                                name: { value: "G2.2.1", attributes: {} },
                                label: { value: "Item 2.2.1", attributes: {} },
                                description: { value: "Brown", attributes: {} },
                                value: { value: "150", attributes: {} }
                            }
                        },
                        { 
                            id: "G2.2.2", 
                            cells: {
                                name: { value: "G2.2.2", attributes: {} },
                                label: { value: "Item 2.2.2", attributes: {} },
                                description: { value: "Brown", attributes: {} },
                                value: { value: "200", attributes: {} }
                            }
                        }
                    ]
                },
                { 
                    id: "G2.3", 
                    cells: {
                        name: { value: "G2.3", attributes: {} },
                        label: { value: "Item 2.3", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                { 
                    id: "G2.4", 
                    cells: {
                        name: { value: "G2.4", attributes: {} },
                        label: { value: "Item 2.4", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                {
                    id: "G2.5",
                    cells: {
                        name: { value: "G2.5", attributes: {} },
                        label: { value: "Nested Subgroup", attributes: {} },
                        description: { value: "Brown override", attributes: {} },
                        value: { value: "", attributes: {} }
                    },
                    style: { color: "#5d4037", background: "#efebe9", border: "#bcaaa4" },
                    children: [
                        { 
                            id: "G2.5.1", 
                            cells: {
                                name: { value: "G2.5.1", attributes: {} },
                                label: { value: "Item 2.5.1", attributes: {} },
                                description: { value: "Brown", attributes: {} },
                                value: { value: "150", attributes: {} }
                            }
                        },
                        { 
                            id: "G2.5.2", 
                            cells: {
                                name: { value: "G2.5.2", attributes: {} },
                                label: { value: "Item 2.5.2", attributes: {} },
                                description: { value: "Brown", attributes: {} },
                                value: { value: "200", attributes: {} }
                            }
                        },
                        {
                            id: "G2.5.3",
                            cells: {
                                name: { value: "G2.5.3", attributes: {} },
                                label: { value: "Nested Subgroup", attributes: {} },
                                description: { value: "Brown override", attributes: {} },
                                value: { value: "", attributes: {} }
                            },
                            style: { color: "#5d4037", background: "#efebe9", border: "#bcaaa4" },
                            children: [
                                { 
                                    id: "G2.5.3.1", 
                                    cells: {
                                        name: { value: "G2.5.3.1", attributes: {} },
                                        label: { value: "Item 2.5.3.1", attributes: {} },
                                        description: { value: "Brown", attributes: {} },
                                        value: { value: "150", attributes: {} }
                                    }
                                },
                                {
                                    id: "G2.5.3.2",
                                    cells: {
                                        name: { value: "G2.5.3.2", attributes: {} },
                                        label: { value: "Nested Subgroup", attributes: {} },
                                        description: { value: "Brown override", attributes: {} },
                                        value: { value: "", attributes: {} }
                                    },
                                    style: { color: "#5d4037", background: "#efebe9", border: "#bcaaa4" },
                                    children: [
                                        { 
                                            id: "G2.5.3.2.1", 
                                            cells: {
                                                name: { value: "G2.5.3.2.1", attributes: {} },
                                                label: { value: "Item 2.5.3.2.1", attributes: {} },
                                                description: { value: "Brown", attributes: {} },
                                                value: { value: "150", attributes: {} }
                                            }
                                        },
                                        {
                                            id: "G2.5.3.2.2",
                                            cells: {
                                                name: { value: "G2.5.3.2.2", attributes: {} },
                                                label: { value: "Nested Subgroup", attributes: {} },
                                                description: { value: "Brown override", attributes: {} },
                                                value: { value: "", attributes: {} }
                                            },
                                            style: { color: "#5d4037", background: "#efebe9", border: "#bcaaa4" },
                                            children: [
                                                { 
                                                    id: "G2.5.3.2.2.1", 
                                                    cells: {
                                                        name: { value: "G2.5.3.2.2.1", attributes: {} },
                                                        label: { value: "Item 2.5.3.2.2.1", attributes: {} },
                                                        description: { value: "Brown", attributes: {} },
                                                        value: { value: "150", attributes: {} }
                                                    }
                                                },
                                                { 
                                                    id: "G2.5.3.2.2.2", 
                                                    cells: {
                                                        name: { value: "G2.5.3.2.2.2", attributes: {} },
                                                        label: { value: "Item 2.5.3.2.2.2", attributes: {} },
                                                        description: { value: "Brown", attributes: {} },
                                                        value: { value: "150", attributes: {} }
                                                    }
                                                }
                                            ]
                                        },
                                        { 
                                            id: "G2.5.3.2.3", 
                                            cells: {
                                                name: { value: "G2.5.3.2.3", attributes: {} },
                                                label: { value: "Item 2.5.3.2.3", attributes: {} },
                                                description: { value: "Brown", attributes: {} },
                                                value: { value: "200", attributes: {} }
                                            }
                                        },
                                        { 
                                            id: "G2.5.3.2.4", 
                                            cells: {
                                                name: { value: "G2.5.3.2.4", attributes: {} },
                                                label: { value: "Item 2.5.3.2.4", attributes: {} },
                                                description: { value: "Brown", attributes: {} },
                                                value: { value: "200", attributes: {} }
                                            }
                                        }
                                    ]
                                },
                                { 
                                    id: "G2.5.3.3", 
                                    cells: {
                                        name: { value: "G2.5.3.3", attributes: {} },
                                        label: { value: "Item 2.5.3.3", attributes: {} },
                                        description: { value: "Brown", attributes: {} },
                                        value: { value: "150", attributes: {} }
                                    }
                                }
                            ]
                        },
                        { 
                            id: "G2.5.4", 
                            cells: {
                                name: { value: "G2.5.4", attributes: {} },
                                label: { value: "Item 2.5.4", attributes: {} },
                                description: { value: "Brown", attributes: {} },
                                value: { value: "200", attributes: {} }
                            }
                        },
                        { 
                            id: "G2.5.5", 
                            cells: {
                                name: { value: "G2.5.5", attributes: {} },
                                label: { value: "Item 2.5.5", attributes: {} },
                                description: { value: "Brown", attributes: {} },
                                value: { value: "200", attributes: {} }
                            }
                        }
                    ]
                },
                { 
                    id: "G2.6", 
                    cells: {
                        name: { value: "G2.6", attributes: {} },
                        label: { value: "Item 2.6", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                { 
                    id: "G2.7", 
                    cells: {
                        name: { value: "G2.7", attributes: {} },
                        label: { value: "Item 2.7", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                { 
                    id: "G2.8", 
                    cells: {
                        name: { value: "G2.8", attributes: {} },
                        label: { value: "Item 2.8", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                {
                    id: "G2.9",
                    cells: {
                        name: { value: "G2.9", attributes: {} },
                        label: { value: "Nested Subgroup", attributes: {} },
                        description: { value: "Brown override", attributes: {} },
                        value: { value: "", attributes: {} }
                    },
                    style: { color: "#5d4037", background: "#efebe9", border: "#bcaaa4" },
                    children: [
                        { 
                            id: "G2.9.1", 
                            cells: {
                                name: { value: "G2.9.1", attributes: {} },
                                label: { value: "Item 2.9.1", attributes: {} },
                                description: { value: "Brown", attributes: {} },
                                value: { value: "150", attributes: {} }
                            }
                        },
                        {
                            id: "G2.9.2",
                            cells: {
                                name: { value: "G2.9.2", attributes: {} },
                                label: { value: "Nested Subgroup", attributes: {} },
                                description: { value: "Brown override", attributes: {} },
                                value: { value: "", attributes: {} }
                            },
                            style: { color: "#5d4037", background: "#efebe9", border: "#bcaaa4" },
                            children: [
                                { 
                                    id: "G2.9.2.1", 
                                    cells: {
                                        name: { value: "G2.9.2.1", attributes: {} },
                                        label: { value: "Item 2.9.2.1", attributes: {} },
                                        description: { value: "Brown", attributes: {} },
                                        value: { value: "150", attributes: {} }
                                    }
                                },
                                { 
                                    id: "G2.9.2.2", 
                                    cells: {
                                        name: { value: "G2.9.2.2", attributes: {} },
                                        label: { value: "Item 2.9.2.2", attributes: {} },
                                        description: { value: "Brown", attributes: {} },
                                        value: { value: "200", attributes: {} }
                                    }
                                },
                                { 
                                    id: "G2.9.2.3", 
                                    cells: {
                                        name: { value: "G2.9.2.3", attributes: {} },
                                        label: { value: "Item 2.9.2.3", attributes: {} },
                                        description: { value: "Brown", attributes: {} },
                                        value: { value: "200", attributes: {} }
                                    }
                                }
                            ]
                        }
                    ]
                },
                { 
                    id: "G2.10", 
                    cells: {
                        name: { value: "G2.10", attributes: {} },
                        label: { value: "Item 2.10", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                { 
                    id: "G2.11", 
                    cells: {
                        name: { value: "G2.11", attributes: {} },
                        label: { value: "Item 2.11", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                },
                { 
                    id: "G2.12", 
                    cells: {
                        name: { value: "G2.12", attributes: {} },
                        label: { value: "Item 2.12", attributes: {} },
                        description: { value: "Green", attributes: {} },
                        value: { value: "100", attributes: {} }
                    }
                }
            ]
        },
        {
            id: "S3",
            cells: {
                name: { value: "S3", attributes: {} },
                label: { value: "Global Standalone C", attributes: {} },
                description: { value: "Orange top-level", attributes: {} },
                value: { value: "777", attributes: {} }
            },
            style: { color: "#555555", background: "#FFD563", border: "#dee2e6" }
        }
    ];

    function countAllDepthsItems(data) {
        let count = 0;

        function traverse(items) {
            for (const item of items) {
                count++; // Count the current item

                // If item has children, traverse them recursively
                if (item.children && Array.isArray(item.children)) {
                    traverse(item.children);
                }
            }
        }

        traverse(data);
        return count;
    }
    console.log(`${countAllDepthsItems(tableData)} total rows ` +
                'in tableData array.');

    const interBarsSpacing = 2;     /* in px */

    document.addEventListener('DOMContentLoaded', function() { 
        init('demo', tableData, interBarsSpacing); 
    });
</script>

</body>
</html>

